{{ if .Store.Get "hasMermaid" }}
<script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
    
    const isDarkMode = document.documentElement.dataset.scheme === 'dark' || 
                       (document.documentElement.dataset.scheme === 'auto' && 
                        window.matchMedia('(prefers-color-scheme: dark)').matches);
    
    mermaid.initialize({
        startOnLoad: true,
        theme: isDarkMode ? 'dark' : 'default'
    });
</script>
{{ end }}
