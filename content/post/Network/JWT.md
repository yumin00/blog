---
title: "JWT에 대해 알아보자"
date: 2023-11-07T23:45:39+09:00
draft: true
categories :
- Network
---

# JWT
## 개념
JWT(Json Web Token)은 인터넷 표준 인증 방식이다. 인증에 필요한 정보를 Token에 담아 암호화시켜 사용하는 토큰이다.

JWT의 중요한 점은 서명된 토큰이라는 것이다. 공개/개인 키를 쌍으로 사용하여 토큰에 서명할 경우 서명된 토큰은 개인키를 보유한 서버가 이 서명된 토큰이 정상적인 토큰인지 인증할 수 있다는 것이다.

## 구조
- Header
- Payload
- Signature

### Header
헤더에는 토큰의 타입이나 서명 생성에 어떤 알고리즘이 사용되었는지 저장한다.

```json
{
  "type": "JWT",
  "alg": "HS512"
}
```

### Payload
페이로드에는 보통 Claim이라는 사용자에 대한, 혹은 토큰에 대한 property를 key-value 형태로 저장한다.

- iss: 토큰 발급자
- sub: 토큰 제목 - 토큰에서 사용자에 대한 식별 값이 됨
- aud: 토큰 대상자
- exp: 토큰 만료 시간
- nbf: 토큰 활성 시간
- iat: 토큰 발급 시간
- jti: JWT 토큰 식별자 - issuer가 여러 명일 때 이를 구분하기 위한 값

페이로드에는 민감한 정보를 담지 않아야 한다. 헤더와 페이로드는 json이 디코딩되어 있을 뿐, 특별한 암호화가 되어 있지 않기 때문에 누구나 jwt를 가지고 디코딩할 수 있기 때문이다.

### Signature
시그니처는 서버에 있는 개인키로만 암호화를 풀 수 있으며, 다른 클라이언트는 임의로 복호화할 수 없다.

### 과정
- JWT 토큰을 클라이언트가 서버로 요청과 동시에 전달한다.
- 서버가 가지고 있는 개인키를 가지고 signature를 복호화한다.
- JWT의 header, payload 값과 일치하는지 확인하여 일치한다면 허용한다.