---
title: "쿠키와 세션에 대해서"
date: 2023-09-19T23:34:03+09:00
draft: true
categories :
- Network
---

# 쿠키와 세션
## 1. 쿠키와 세션은 왜 사용할까?
HTTP 프로토콜의 약점을 보완하고자 쿠키와 세션을 사용한다. HTTP 에서 배웠듯이, HTTP는 상태를 가지지 않고, 비연결성이라는 특성을 가진다. 그래서 서버는 클라이언트가 누구인지 매번 확인해야한다. 이 특성을 보완하기 위해 쿠키와 세션을 사용한다.

> 상태를 가지지 않음 (stateless)
> 
>  클라이언트와 서버가 첫 번째 통신에서 데이터를 주고받아도 두 번째 통신에서는 앞서 받은 데이터를 유지하지 않는다.

> 비연결성()
> 
> 클라이언트와 서버가 연결을 맺은 후 클라이언트의 요청에 서버가 응답을 마치면 연결이 끊어진다.


## 2. 쿠키(Cookie)
### 쿠키의 개념
쿠키란 클라이언트 로컬에 저장되어 있는 키와 값이 들어있는 데이터 파일이다. 사용자 인증이 유효한 시간을 명시할 수 있으며, 유효 시간이 정해지면 브라우저가 종료되더라도 인증이 유지된다는 특성이 있다. 쿠키는 클라이언트의 상태 정보를 로컬에 저장했다가 참조한다.

클라이언트에 300개까지 쿠키를 저장할 수 있고, 하나의 도메인당 20개의 값만 가질 수 있으며, 하나의 쿠키값은 4KB까지 저장할 수 있다.

Response 헤더에 Set-Cookie 속성을 사용하면 클라이언트에 쿠키를 만들 수 있다. 또한 사용자가 요청하지 않아도 브라우저가 Request 헤더를 넣어서 자동으로 서버에 전송한다.

### 쿠키의 구성요소
- 이름 : 각 쿠키를 구별하는 데 사용되는 이름
- 값 : 쿠키의 이름과 관련된 값
- 유효시간 : 쿠키의 유지시간
- 도메인 : 쿠키를 전송할 도메인
- 경로 : 쿠키를 전송할 요청 경

### 쿠키의 동작 방식
1. 클라이언트에서 데이터 요청
2. 서버에서 쿠키 생성
3. HTTP 헤더에 쿠키를 포함시켜 응답
4. 브라우저가 종료되어도 쿠키 만료 기간이 있다면 클라이언트에서 보관
5. 같은 요청을 할 경우 HTTP 헤더에 쿠키를 포함시켜 요청
6. 서버에서 쿠키를 읽어 이전 상태 정보를 변경할 필요가 있다면 쿠키를 업데이트하여 변경된 쿠키를 HTTP 헤더에 포함시켜 응답

### 쿠키 사용 예시
- 아이디와 비밀번호를 저장하시겠습니까?
- 더이상 이 창을 보지 않음 체크