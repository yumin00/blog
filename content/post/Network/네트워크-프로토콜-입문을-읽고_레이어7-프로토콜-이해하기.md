---
title: "네트워크 프로토콜 입문을 읽고_레이어7 프로토콜 이해하기"
date: 2026-02-10T22:29:27+09:00
draft: true
categories :
- Network
---

## L5(세션 계층)
- 두 애플리케이션 사이의 대화를 관리하는 게층
- 세션 생성/유지/종료 통신을 시작할 때 세션을 열고, 데이터를 주고받는 동안 유지하고, 끝나면 닫는 역할
- 긴 데이터를 전송할 때 중간 체크포인트를 찍어두고 중간에 문제가 생기면 마지막 체크포인트부터 이어서 보낼 수 있도록 함

## L6(표현 계층)
- 데이터의 형식을 다루는 계층
- 서로 다른 시스템은 데이터를 다른 방식으로 표현할 수 있기 때문에 서로 데이터를 이해할 수 있도록 번역을 해주는 역할
- 데이터를 안전하게 보내기 위해 암호화하고, 받는 쪽에서 복호화하는 역할
- 데이터를 압축해서 전송 효율을 높이고, 받는 쪽에서 다시 풀어주는 역할

## L7(애플리케이션 계층)
- 사용자와 가장 직접적으로 맞닿아 있는 계층

L1~L4가 도로, 트럭, 물류센터, 배송 경로 같은 운송 인프라라면, L7은 택배 상자 안에 든 실제 물건과 그걸 주문하는 쇼핑앱이라고 비유할 수 있다. 사용자가 실제로 "이걸 보내줘", "이걸 보여줘"라고 요청하고 결과를 받는 바로 그 지점이 L7다.

## HTTP(Hyper Text Transfer Protocol)
클라이언트와 서버가 데이터를 주고 받기 위한 L7 프로토콜 중 하나이다. 우리가 브라우저 주소창에서 URL을 입력하고 엔터를 누르는 순간, 내부적으로 HTTP가 동작하고 있는 것이다.

### 특징
- 클라이언트가 먼저 요청하고 서버가 응답
- 한 번 요청-응답이 끝나면 연결을 끊는다.
- Stateless: 이전 요청을 기억하지 않는다.

### HTTP 진화
- HTTP/1.0 — 요청마다 연결을 새로 맺고 끊음. 느림.
- HTTP/1.1 — Keep-Alive로 연결 재사용 가능. 파이프라이닝 도입. 지금도 많이 쓰임.
- HTTP/2 — 하나의 연결에서 여러 요청을 동시에(멀티플렉싱) 처리. 헤더 압축 도입. 훨씬 빨라짐.
- HTTP/3 — TCP 대신 **QUIC(UDP 기반)**을 사용. 연결 설정이 더 빠르고, 패킷 손실에도 강함. 최신 트렌드.

## TLS
- 기밀성: 데이터를 암호화하여 중간에 가로채도 내용을 알 수 없도록
- 무결성: 데이터가 전송 중에 변조되지 않았음을 보장
    - MAC(Message Authentication Code) 기술 사용
- 인증: 내가 접속한 서버가 진짜 그 서버인지 확인
    - Certificate(인증서)로 검증

### Certificat와 CA
#### 인증서란?
서버가 "나는 진짜 naver.com이야"라고 주장할 때 그 증거로 내미는 디지털 신분증이다. 인증서 안에는 서버의 도메인 이름, 공개키, 발급자 정보, 유효기간 등이 들어 있다.

#### CA란?
인증서를 발급해주는 신뢰할 수 있는 제3자 기관이다. 현실에서 주민등록증을 정부가 발급해주듯 디지털 인증서는 CA가 발급한다.

```
네이버: "저 진짜 네이버예요" (인증서 제시)
브라우저: "이 인증서 누가 발급했지? → CA가 발급했네 → CA는 내가 신뢰하는 기관이야 → OK, 믿을게"
```

브라우저에는 신뢰할 수 있는 CA 목록이 미리 내장되어 있어서 인증서의 발급자가 그 목록에 있으면 "이 사이트는 안전하다"고 판단하한다.

대표적인 CA로는 Let's Encrypt, DigiCert, GlobalSign 등이 있다.

### TSL 1.3 핸드셰이크 시 키 교환 방법
```
[공개 정보: 노란색 물감]  ← 둘 다 알고 있음, 해커도 알 수 있음

클라이언트                          서버
비밀 색: 🔴 빨강                   비밀 색: 🔵 파랑
(나만 알고 있음)                    (나만 알고 있음)

① 각자 공개 색 + 비밀 색을 섞음
   노랑 + 빨강 = 🟠 주황           노랑 + 파랑 = 🟢 초록

② 섞은 결과를 상대방에게 보냄
   🟠 주황 →→→→→→→→→→→→→         
                                   ←←←←←←←←←←←← 🟢 초록

③ 받은 색에 자기 비밀 색을 섞음
   초록 + 빨강 = 🟤 갈색           주황 + 파랑 = 🟤 갈색

④ 둘 다 같은 갈색이 나옴! → 이게 세션 키!
```

- 비밀 키를 네트워크에 노출하지 않으면서 양쪽이 같은 세션 키를 만든다
= 임시 키를 사용하고 폐기해서 한 세션이 뚫려도 다른 세션은 안전하다 (순방향 비밀성)

#### TLS 1.3에서 달라진 점
TLS 1.3은 2018년에 나온 최신 버전으로 주요 개선점은 다음과 같다.

1. 핸드셰이크가 빨라졌다
TLS 1.2는 서버와 2번 왕복해야 핸드셰이크가 끝나는데, TLS 1.3은 **1번 왕복**으로 가능하다. 이전에 접속한 적이 있으면 0-RTT로 바로 데이터를 보낼 수도 있다.

```
클라이언트                              서버

──── Client Hello + 🟠 주황 ────→      ① 계산은 미리 해둠
                                        ② 주황 받고, 초록 계산
←──── Server Hello + 🟢 초록 ────      
③ 갈색 계산 완료                        ③ 갈색 계산 완료

──── 🔒 암호화된 데이터 ────→
```

2. 취약한 암호화 방식 제거
오래된 알고리즘(RSA 키 교환, RC4, DES 등)을 과감하게 삭제해서 보안이 강화됐다ㄴ.

3. 키 교환 방식 개선
모든 키 교환에 **순방향 비밀성(Forward Secrecy)**을 보장하는 방식만 사용한다. 이건 서버의 개인키가 나중에 유출되더라도, 과거에 주고받은 데이터는 해독할 수 없다는 뜻이다.

## HTTPS(HyperText Transfer Protocol Secure)
HTTP에 TLS 보안을 입힌 것이 바로 HTTPS이다. HTTP는 데이터를 평문으로 보내지만 HTTPS는 TLS로 암호화된 터널 안에서 HTTP 통신을 한다.