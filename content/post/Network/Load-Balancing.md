---
title: "로드 밸런싱(Load Balancing)에 대해 알아보자"
date: 2024-07-15T19:43:26+09:00
draft: true
categories :
- Network
---

사용자가 한두명인 서버에서 부하가 발생할까? 아마 그럴 확률은 매우 적을 것이다. 하지만 만약 사용자가 수만명, 수십만명으로 늘어난다면 서버는 안정적으로 동시 요청을 처리하기 어려울 것이다.

이러한 경우 서버의 개수를 늘려서 사용할 수 있는데 (scale out), 여러 요청이 들어왔을 때 어떤 서버에서 요청을 보낼지 결정하는 것을 로드밸런싱이라고 한다.

# 로드 밸런싱 (Load Balancing) 이란?
로드밸런싱이란, 서버나 네트워크 리소스의 부하를 여러 서버나 장치로 분산시키는 기술이다. 로드밸런싱은 웹 서비스, 데이터베이스, 이메일 서비스 등 다양한 애플리케이션에서 사용된다.

이때 여러 서버나 장치로 분산시키는 역할을 하는 것이 바로 로드 밸런서 (Load Balancer) 이다.

![image](https://github.com/user-attachments/assets/57779aa6-5b14-4cdd-aaec-6f3845f524d3)

# 로드 밸런서 (Load Balancer)
## 트래픽 분배
- 클라이언트의 요청을 여러 서버에 고르게 분배하여 각 서버의 부하를 줄인다.
- 이때, 다양한 분배 알고리즘을 사용하여 최적의 서버에 트래픽을 분배한다. ** 분배 알고리즘은 아래에서 더 자세히 알아보자.

## 고가용성
- 특정 서버에 장애가 발생할 경우, 정상 동작하는 서버로 트래픽을 분배한다.
- 헬스체크: 주기적으로 각 서버의 상태를 확인하며, 비정상적인 서버를 감지한다.

## 보안 강화
- SSL 종료: 로드밸런서가 SSL 암호화를 처리하여 백엔드 서버의 부담을 줄인디ㅏ.
- DDoS 방어: 대규모 트래픽 공격(DDoS)을 방어하는 데 도움을 주며, 트래픽 필터링을 통해 악의적인 요청을 차단할 수 있다.

## 성능 최적화
- 캐싱: 자주 요청되는 데이터를 캐싱하여 응답 시간을 줄이고 서버 부하를 줄인다. 
  - 자주 요청되더라도 캐싱하면 안되면 어떻게 해야하지? -> 로드밸런서는 특정 요청을 캐싱에서 제외할 수 있는 기능을 제공한다.
- 압축: 트래픽을 압축하여 네트워크 대역폭을 효율적으로 사용한다.
  - 트래픽 압축: 전송되는 데이터의 크기를 압축 -> 네트워크 지연을 줄일 수 있다.

# 로드 밸런싱 종류
## DNS 기반 로드 밸런싱
도메인 이름 시스템(DNS)을 기준으로 분산시키는 방식이다.

![image](https://github.com/user-attachments/assets/9e07384d-1a59-4548-bb87-cf3f7219845b)

에를 들어 웹 서버가 있다고 가정했을 때, 여러 대의 웹 서버는 자신만의 공인 IP를 가지고 있다.
사용자가 웹 서비스에 접속하기 위해 도메인 주소를 브라우저에 입력하면, DNS는 도메인의 정보를 조회하는데 이때 여러 웹 서버 중 특정 알고리즘을 통해 하나의 웹 서버 IP 주소를 선택하여 사용자에게 알려주는 방식이다.

DNS를 통해 IP 주소를 반환하는 과정에서 로드 밸런싱이 이루어지기 때문에 애플리케이션 계층(7 Layer)에서 로드 밸런싱이 이루어지는 것을 알 수 있다.

- 설정이 간단하고, 네트워크 계층에 구애받지 않는다.
- 전 세계적으로 분산된 데이터 센터에 적합하다.

- DNS 캐싱 때문에 부하 분산이 실시간으로 반영되지 않는다.
- 장애 발생 시 자동으로 서버를 제외하는 기능이 부족한다.
