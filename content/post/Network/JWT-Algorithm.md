---
title: "JWT Signature 알고리즘에 대해 알아보자"
date: 2023-11-14T20:33:19+09:00
draft: true
categories :
- Network
---

# JWT Signature 알고리즘
## JWT Signature 개념
JWT 시그니쳐는 서명에 대한 정보로, 헤더와 페이로드를 인코딩한 값을 합치고, 특정 알고리즘과 특정 키로 암호화되어 있는 값이다. 암호화되어 있기 때문에 복호화를 하지 않으면 볼 수 없다.

헤더와 페이로드는 암호화된 값이 아니라, 인코딩되어 있다. 헤더와 페이로드는 보안이 취약하기 때문에 시그니처를 추가하여 위변조를 판별할 수 있다.

## JWT 암호화 방식
### 1. 대칭키 암호화
암호화, 복호화 키가 같을 경우 대칭키 암호화 방식이라고 한다.

- 같은 키를 사용하여 암호화, 복호화하기 때문에 속도가 빠르다.
- 대표적으로 HMAC 암호화 알고리즘이 있다.
- 값에 SHA256를 적용해서 해싱 후 private key(대칭키 역할)로 암호화한다.
- private key를 알고 있는 서버만 JWT를 복호화할 수 있다.

### 2. 비대칭키 암호화
암호화, 복호화 키가 다른 경우 비댕치키 암호화 방식이라고 한다.

- 속도가 느리지만, 대칭키 암호화에 비해 안전하다.
- 대표적으로 RSA 암호화 알고리즘이 있다.
- 값에 SHA256을 적용해서 해싱 후 비밀키로 암호화한다.
- 공개키는 공개적으로 제공한다. 어떤 서버든 공개키를 통해 JWT를 복호화할 수 있다.

## SHA256 알고리즘
HS256, RS256 알고리즘에서 공통적으로 사용되는 SHA256 알고리즘에 대해 알아보자. 

- SHA(Secure Hash Algorithm)의 한 종류로 256비트로 구성되며 64자리 문자열을 반환
- 블록체인에서 가장 많이 사용
- 2^256 만큼 경우의 수를 만들 수 있음
- 많은 시간이 소요될 정도로 큰 숫자이기 때문에 충돌로부터 비교적 안전하다고 평가됨
- 해쉬 알고리즘은 복호화가 불가능하다. 즉, 해쉬 알고리즘 종류 중 하나인 SHA256 알고리즘은 복호화가 불가능하다.

## HSS256 알고리즘
- JWT 암호화 알고리즘으로 많이 사용한다.
- HS256 알고리즘 = HMAC + SHA256

### HS256 알고리즘을 이용한 JWT 동작 방식
- 헤더, 페이로드는 Base64로 인코딩 (복호화 가능)
- 시그니처는 "헤더 + 페이로드 + secret 값" 을 HS256 알고리즘으로 암호화
- 생성된 헤더, 페이로드, 시그니처로 JWT를 만들어 클라이언트로 보내고, 클라이언트를 로컬 스토리지에 토큰을 저장
- 클라이언트에서 요청을 보낼 때, 토큰을 함께 보냄
- 서버에서는 헤더와 페이로드를 Base64 알고리즘으로 복호화한 뒤, 서버만 알고 있는 개인키로 HS256 알고리즘을 통해 암호화
- 